#N canvas -66 -1051 403 329 12;
#X declare -lib iemmatrix;
#X declare -lib hexloader;
#X obj 45 12 inlet size;
#X obj -64 292 outlet;
#X obj -64 162 mtx_distance;
#N canvas 511 22 299 279 buffer 0;
#X obj 185 14 inlet size;
#X obj 79 244 outlet;
#X obj 15 14 inlet xyz;
#X obj 185 73 mtx_zeros;
#X obj 47 143 mtx;
#X obj 47 173 t a a;
#X obj 137 214 mtx_scroll 1;
#X msg 185 43 \$1 3;
#X obj 15 74 cyclone/prepend row 1;
#X obj 15 105 t a b;
#X text 61 104 <----------- Return previous;
#X text 108 124 N-1 \, then incorporate;
#X text 89 144 the new incoming vector.;
#X connect 0 0 7 0;
#X connect 2 0 8 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 1 0;
#X connect 6 0 4 1;
#X connect 7 0 3 0;
#X connect 8 0 9 0;
#X connect 9 0 4 0;
#X connect 9 1 4 0;
#X restore -64 132 pd buffer;
#X obj -64 12 inlet x y z;
#X obj 45 72 - 1;
#X text 99 32 N;
#X text 0 290 Juan Ignacio Mendoza - 2019;
#X obj 136 12 inlet mode;
#N canvas 718 168 443 366 matrix_mode 0;
#X obj -98 49 list split 3;
#X obj -58 79 cyclone/prepend col 1 0;
#X text 96 47 |;
#X text 96 56 |;
#X text 96 60 V;
#X obj 60 239 mtx_fill;
#X obj 60 169 mtx_slice;
#X msg 120 139 2 1 \$1 \$1;
#X obj -12 139 mtx;
#X obj 206 79 mtx_zeros;
#X obj -58 109 t b a b;
#X obj -58 269 mtx;
#X msg 236 199 matrix 3 2;
#X obj 6 109 r \$0-pre_matrix;
#X obj -48 299 s \$0-pre_matrix;
#X obj 206 109 s \$0-pre_matrix;
#X obj 86 199 r \$0-pre_matrix;
#X obj 206 19 inlet N;
#X obj -98 19 inlet distance;
#X text 28 35 with itself;
#X text 48 20 distance;
#X obj -58 329 outlet;
#X obj 120 19 inlet N-1;
#X connect 0 1 1 0;
#X connect 1 0 10 0;
#X connect 5 0 11 1;
#X connect 6 0 5 0;
#X connect 7 0 6 1;
#X connect 8 0 6 0;
#X connect 9 0 15 0;
#X connect 10 0 11 0;
#X connect 10 1 11 0;
#X connect 10 2 8 0;
#X connect 11 0 14 0;
#X connect 11 0 21 0;
#X connect 12 0 5 2;
#X connect 13 0 8 1;
#X connect 16 0 5 1;
#X connect 17 0 9 0;
#X connect 18 0 0 0;
#X connect 22 0 7 0;
#X connect 22 0 12 0;
#X restore 13 222 pd matrix_mode;
#N canvas 543 22 581 344 vector_mode 0;
#X obj 90 -68 inlet N;
#X obj -65 -71 inlet distance;
#X obj -65 232 outlet;
#X obj 30 132 mtx_index;
#X obj 294 102 mtx_zeros;
#N canvas 562 22 301 597 ttrindex 0;
#X obj 139 412 cyclone/prepend;
#X obj 241 262 list;
#X msg 241 182 list;
#X obj 114 562 outlet;
#X obj 17 12 inlet N;
#X obj 37 172 f;
#X obj 37 232 until;
#X obj 37 292 cup;
#X obj 107 172 - 1;
#X obj 17 132 - 1;
#X obj 100 322 select;
#X obj 40 72 1;
#X obj 139 262 +;
#X obj 177 262 f;
#X obj 47 262 r \$0-set;
#X obj 157 202 r \$0-set;
#X obj 157 232 - 1;
#X obj 40 102 s \$0-set;
#X obj 37 202 trigger any any;
#X obj 114 532 list;
#X obj 17 452 - 1;
#X obj 17 42 t a b b;
#X obj 18 492 select;
#X obj 100 452 cup;
#X obj 37 412 r \$0-set;
#X obj 57 132 r \$0-nxt;
#X obj 37 382 s \$0-nxt;
#X obj 37 352 delay;
#X text 77 42 For a square matrix size = N \,;
#X text 98 62 return its lower triangle \,;
#X text 145 82 excluding the main;
#X text 194 102 diagonal and;
#X text 252 142 row.;
#X text 208 122 the lowest;
#X connect 0 0 1 0;
#X connect 0 0 19 1;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 4 0 21 0;
#X connect 5 0 8 0;
#X connect 5 0 18 0;
#X connect 6 0 7 0;
#X connect 7 0 10 0;
#X connect 8 0 5 1;
#X connect 9 0 5 0;
#X connect 9 0 20 0;
#X connect 10 0 23 0;
#X connect 10 0 27 0;
#X connect 10 1 0 0;
#X connect 11 0 17 0;
#X connect 12 0 10 1;
#X connect 12 0 13 0;
#X connect 13 0 12 1;
#X connect 14 0 7 0;
#X connect 15 0 16 0;
#X connect 16 0 12 1;
#X connect 18 0 6 0;
#X connect 18 1 12 0;
#X connect 19 0 3 0;
#X connect 20 0 22 1;
#X connect 21 0 9 0;
#X connect 21 1 11 0;
#X connect 21 2 2 0;
#X connect 22 0 19 0;
#X connect 23 0 22 0;
#X connect 24 0 23 0;
#X connect 25 0 5 0;
#X connect 27 0 26 0;
#X restore 90 2 pd ttrindex;
#X obj 90 102 cyclone/prepend;
#X obj 192 2 expr ( (pow($f1 \, 2) - $f1) / 2 ) - $f1 + 1;
#X obj 90 -38 trigger any any;
#X obj 192 32 trigger any any;
#X obj -65 172 mtx_concat col;
#X msg 192 72 matrix \$1 1;
#X msg 294 72 \$1 1;
#X obj -65 202 mtx_transpose;
#X connect 0 0 8 0;
#X connect 1 0 10 0;
#X connect 3 0 10 1;
#X connect 4 0 10 1;
#X connect 5 0 6 0;
#X connect 6 0 3 1;
#X connect 7 0 9 0;
#X connect 8 0 5 0;
#X connect 8 1 7 0;
#X connect 9 0 11 0;
#X connect 9 1 12 0;
#X connect 10 0 3 0;
#X connect 10 0 13 0;
#X connect 11 0 6 1;
#X connect 12 0 4 0;
#X connect 13 0 2 0;
#X restore -159 252 pd vector_mode;
#X obj 136 102 s \$0-mode;
#X obj -159 192 cyclone/gate 2;
#X obj -159 132 r \$0-mode;
#X obj -159 162 + 1;
#X msg 143 72 0;
#X obj 143 42 loadbang;
#X obj 77 72 s \$0-N;
#X obj -64 222 r \$0-N;
#X obj 108 192 r \$0-N;
#X obj 45 42 t a a;
#X obj 45 102 s \$0-N-1;
#X obj 60 162 r \$0-N-1;
#X obj 17 132 cyclone/prepend matrix 1 3;
#X obj -64 42 t a a;
#N canvas 0 22 377 449 info 0;
#X text -149 28 This abstraction returns the lower triangle;
#X text -142 109 INLET 1: List of 3 numbers.;
#X text -149 -2 ONLINE SELF-SIMILARITY;
#X text -149 179 OUTLET 1:;
#X text -130 399 the upper triangle remains only zeros.;
#X text -130 379 euclidean distances of the last N lists \, while;
#X text -130 359 A matrix of size = N \, whose lower triangle is;
#X text -149 339 Else if mode = 1;
#X text -149 199 If mode = 0;
#X text -130 219 A vector of length = ( (N^2 - N) / 2 ) - N + 1 \,
;
#X text -131 239 which contains the lower triangle of the self;
#X text -132 259 similarity matrix excluding the diagonal.;
#X text -132 279 The following is an example of the output for;
#X text -131 319 (2 \, 1) \, (3 \, 1) \, (3 \, 2);
#X text -131 299 a similarity matrix of size = 3:;
#X text -142 149 INLET 3: mode;
#X text -149 69 constructed with the N-latest 3-element vectors.;
#X text -142 129 INLET 2: N = Size of the matrix (size of window).
;
#X text -149 49 of an euclidean-distance self-similarity matrix;
#X restore -158 92 pd info;
#N canvas 0 22 158 100 import 0;
#X obj 19 20 import iemmatrix;
#X obj 19 50 import hexloader;
#X restore -158 62 pd import;
#X connect 0 0 20 0;
#X connect 2 0 12 1;
#X connect 3 0 2 0;
#X connect 4 0 24 0;
#X connect 5 0 3 1;
#X connect 5 0 21 0;
#X connect 8 0 11 0;
#X connect 9 0 1 0;
#X connect 10 0 1 0;
#X connect 12 0 10 0;
#X connect 12 1 9 0;
#X connect 13 0 14 0;
#X connect 14 0 12 0;
#X connect 15 0 11 0;
#X connect 16 0 15 0;
#X connect 18 0 10 1;
#X connect 19 0 9 2;
#X connect 20 0 5 0;
#X connect 20 1 17 0;
#X connect 22 0 9 1;
#X connect 23 0 2 1;
#X connect 24 0 3 0;
#X connect 24 1 23 0;
#X coords 0 0 1 1 200 30 0;
